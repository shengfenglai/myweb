<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shengfeng.dao.mapper.UserMapper">
	<insert id="addUser" parameterType="com.shengfeng.po.User">
		<selectKey resultType="long" order="AFTER" keyProperty="id">
			select LAST_INSERT_ID()
		</selectKey>
		insert into b_user (username,password,level,sex,mobilephone,img)
		values (#{username},#{password},#{level},#{sex},#{mobilephone},#{img})
	</insert>

	<resultMap type="com.shengfeng.po.User" id="userMap">
		<id property="username" column="username" />
		<id property="password" column="password" />
		<id property="level" column="level" />
		<id property="sex" column="sex" />
		<id property="mobilephone" column="mobilephone" />
		<id property="img" column="img" />
	</resultMap>
	
	<sql id="userInfo">
		username,password,level,sex,mobilephone,img
	</sql>
	
	<select id="getUserByUserId" parameterType="long" resultMap="userMap">
	 	select 
	 	<include refid="userInfo"></include>
	 	from b_user  where id=#{userId}
	</select>
</mapper>
